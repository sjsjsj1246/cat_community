## 몽구스 사용

- app.module.ts 에서 import
  - 여러 옵션 있음
- entity.schema.ts 만들기
  - 여러 옵션과 컬럼, 메소드 정의
  - 컬럼 옵션으로 required, validation 등
  - class-validation 라이브러리 사용
    - app.useGlobalPipes(new ValidationPipe()); 등록
- service code에서 schema를 사용할 수 있도록 의존성 주입을 해야 한다.
- module에서도 import해야함
- virture feild: 실제로 저장되지는 않지만 비즈니스 로직에서 사용될 수 있도록 제공하는 필드
  - 이를 통해 password가 직접적으로 노출되는 것을 막을 수 있다.

## DTO 패턴(Data Transfer Object)

- 계층간 데이터 교완을 위한 객체
- client -> controller -> service -> DB
- 중간중간 DTO를 거쳐 옮겨감
- 데코레이터 패턴 이용과 상속을 통한 재사용성을 위해 class로 정의한다.

## Sweager

- controller 함수 앞에 @ApiOperation({ summary: '회원가입' })으로 설명 삽입
- DTO에 @ApiProperty({ example: 'asdf@1234', description: 'email', required: true }) 등 삽입

## 기타

- password 암호화: bcrypt

## 에러들

- ERROR [ExceptionsHandler] No write concern mode named 'major' found in replica set configuration
  - mongodb에 데이터를 삽입까지 끝냈음에도 불구하고 에러가 났다
  - mongodb URI 끝 부분의 &w=major를 지우면 된다.
